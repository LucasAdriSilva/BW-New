
{% extends 'base.html' %}

{% block content %}
  <div>
    <h1 class="text-center mb-5">Escolha um plano</h1>
    {% if data.msgFal %}
    <h5 id="msg_valided" class="alert alert-danger text-center">{{data.msgFal}}</h5>
    {% endif %}
    <div class="row justify-content-center ">
      <div class="box">
        <span>
          <div  class="row py-4 px-5 d-flex flex-row justify-content-center align-content-center h100">
            <div class="col-12 text-center ">
              <h2 class="titleCard">Plano Mensal</h2>
            </div>
            <div class="col-12 d-flex flex-row justify-content-center my-3">
              <h3 class="fontColor">R$ 9</h3><p class="align-self-end fontColor">,90</p>
            </div>

            <div class="col-12 d-flex justify-content-between align-items-center reset text-start w100" >
              <p class="reset text-start fontColor">20 conversões mensais</p> 
              <i class="fa-solid fa-check fontColor"></i>
            </div>

            <div class="col-12 d-flex justify-content-between align-items-center reset text-start w100">
              <p class="reset text-start fontColor">Otimização de Slides</p> 
              <i class="fa-solid fa-check"></i>
            </div>


            <div class="col-12 text-center p-3">
              <button 
                id="buySignature"
                class="btn text-white fw-bolder mt-1 px-1 w-75"
                style="background-color: rgb(255,93,94)"
            >
              Comprar
            </button>
            </div>
          </div>
            
        </span>
      </div>

      <!-- <div class="box2">
        <span>
          <div  class="row py-4 px-5 d-flex flex-row justify-content-center align-content-center h100">

            <div class="col-12 text-center =">
              <h2 class="titleCardLong ">Plano Semestral</h2>
            </div>

            <div class="col-12 d-flex flex-row justify-content-center my-3 ">
              <h3>R$ 49</h3><p class="align-self-end">,90</p>
            </div>

            <div class="col-12 d-flex justify-content-between align-items-center reset text-start w100" >
              <p class="reset text-start">Conversões ilimitadas</p> 
              <i class="fa-solid fa-check"></i>
            </div>

            <div class="col-12 d-flex justify-content-between align-items-center reset text-start w100">
              <p class="reset text-start">Otimização de Slides</p> 
              <i class="fa-solid fa-check"></i>
            </div>

            <div class="col-12 d-flex justify-content-between align-items-center reset text-start w100">
              <p class="reset text-start">Válido por 6 meses</p> 
              <i class="fa-solid fa-check"></i>
            </div>

            <div class="col-12 text-center p-3">
              <button 
                class="btn text-white fw-bolder mt-1 px-1 w-75"
                style="background-color: rgb(255,93,94)"
            >
              Comprar
            </button>
            </div>
          </div>
            
        </span>
      </div> -->
    </div>
  </div>
  <script src="https://js.stripe.com/v3/"></script>
  <script>

  // Pega a chave da Stripe 
    fetch("/config")
    .then((result) => { return result.json(); })
    .then((data) => {
      // Initialize Stripe.js
       const stripe = Stripe(data.publicKey);
      // Event handler
      document.querySelector("#buySignature").addEventListener("click", () => {
        // Get Checkout Session ID
        fetch("/create-checkout-session")
        .then((result) => { return result.json(); })
        .then((data) => {
          // Redirect to Stripe Checkout
          console.log(data)
          return stripe.redirectToCheckout({sessionId: data.sessionId})
        })
        .then((res) => {
          console.log(res);
        });
      });
    });

    //TEMPO DE MSG
    setTimeout(function () {
        document.getElementById("msg_valided").style.display = "none";
        }, 10000);
  </script>
{% endblock %}

